webpackJsonp([10],{tcoL:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("33ZO"),a=r("M9A7"),o={name:"Register",data:function(){return{sentCapcha:!1,rightCapcha:"",backgroundDiv:{backgroundRepeat:"no-repeat",backgroundSize:"100%"},userForm:{account:"",nickname:"",password:"",capcha:""},rules:{account:[{required:!0,message:"请输入正确的手机号",trigger:"blur"},{min:11,max:11,message:"请输入 11 位手机号"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:4,max:16,message:"昵称必须为 4 到 16 位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码必须为 6 到 20 位",trigger:"blur"}],capcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码为 4 位",trigger:"blur"}]}}},methods:{getCapcha:function(){var e=this;11===this.userForm.account.length?(console.log("Getting capcha of "+this.userForm.account),Object(a.a)(this.userForm.account).then(function(t){e.rightCapcha=t.data.obj,console.log("Right capcha is "+e.rightCapcha),e.sentCapcha=!0})):this.$message({message:"请先填写正确的手机号",type:"error",showClose:!0})},start:function(e){this.sentCapcha?this.register(e):this.getCapcha()},register:function(e){if(this.rightCapcha==this.userForm.capcha){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$store.dispatch("register",t.userForm).then(function(){t.$message({message:"注册成功 快写文章吧",type:"success",showClose:!0}),t.$router.push({path:"/"})}).catch(function(e){"error"!==e&&t.$message({message:e,type:"error",showClose:!0})})})}else this.$message({message:"验证码错误",type:"error",showClose:!0})}},components:{"base-header":s.a}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"title",rawName:"v-title"}],attrs:{id:"register","data-title":"注册 - MYDG"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.start("userForm")}}},[r("base-header"),e._v(" "),r("div",{staticClass:"me-login-box me-login-box-radius",style:e.backgroundDiv},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules}},[r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account",t)},expression:"userForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"nickname"}},[r("el-input",{attrs:{placeholder:"昵称"},model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),e.sentCapcha?[r("el-form-item",{attrs:{prop:"capcha"}},[r("el-input",{attrs:{placeholder:"验证码"},model:{value:e.userForm.capcha,callback:function(t){e.$set(e.userForm,"capcha",t)},expression:"userForm.capcha"}})],1),e._v(" "),r("el-form-item",{staticClass:"me-login-button",attrs:{size:"small"}},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.register("userForm")}}},[e._v("注册")])],1)]:[r("el-form-item",{staticClass:"me-login-button",attrs:{size:"small"}},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.getCapcha()}}},[e._v("获取 4 四位验证码")])],1)]],2),e._v(" "),r("div",{staticClass:"me-login-design"},[r("p",[r("span",{staticClass:"me-login-design-pure-text"},[e._v("已有账号？")]),e._v(" "),r("strong",[r("router-link",{staticClass:"me-login-design-color",attrs:{to:"/login"}},[e._v("登录")])],1),e._v(" "),r("strong",[r("router-link",{staticClass:"me-login-design-color",attrs:{to:"/"}},[e._v("回首页")])],1)])])],1)],1)},staticRenderFns:[]};var i=r("C7Lr")(o,n,!1,function(e){r("yjFJ")},"data-v-6e43bfc8",null);t.default=i.exports},yjFJ:function(e,t){}});
//# sourceMappingURL=10.83c5e016082570b374b2.js.map