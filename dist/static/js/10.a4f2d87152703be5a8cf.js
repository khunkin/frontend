webpackJsonp([10],{YAGB:function(e,t){},tKxd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),o=a.n(n),i=a("33ZO"),c=a("dLd/"),u=a.n(c),l=a("uzBN"),m=a("vMJZ"),d={name:"UserInfo",created:function(){this.userForm.name=this.user.name,this.userForm.avatar=this.user.avatar,this.userForm.account=this.$store.state.account},data:function(){return{defaultAvatar:u.a,backgroundDiv:{backgroundImage:"url('https://i.pinimg.com/564x/f7/41/5d/f7415de43c5039a131feedfa42e8b019.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"100%"},userForm:{name:"",password:"",avatar:"",account:""},rules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:4,max:16,message:"昵称必须为 4 到 16 位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码必须为 6 到 20 位",trigger:"blur"}]}}},computed:{user:function(){return{login:0!=this.$store.state.account.length,avatar:this.$store.state.avatar,name:this.$store.state.name}}},methods:{clickAvatarInput:function(){document.getElementById("avatarInput").click()},changeAvatar:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.getElementById("avatarInput").files[0],t.next=3,Object(l.a)(a);case 3:e.userForm.avatar=t.sent;case 4:case"end":return t.stop()}},t,e)}))()},getObjectURL:function(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},upload:function(){var e=this,t=this,a=this.userForm,r={account:a.account,avatar:a.avatar,password:a.password,nickname:a.name},s=this.$loading({lock:!0,text:"修改中，请稍后..."});Object(m.k)(r).then(function(a){s.close(),t.$message({message:"修改成功啦！ 请重新登录~~",type:"success",showClose:!0}),e.$store.dispatch("logout").then(function(){e.$router.push({path:"/login"})}).catch(function(e){"error"!==e&&t.$message({message:e,type:"error",showClose:!0})})}).catch(function(e){s.close(),"error"!==e&&t.$message({message:e,type:"error",showClose:!0})})}},components:{"base-header":i.a}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"title",rawName:"v-title"}],attrs:{id:"login","data-title":"个人信息"}},[a("base-header"),e._v(" "),a("div",{staticClass:"user-info me-login-box-radius"},[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"account"}},[a("div",{staticClass:"head_img"},[a("img",{attrs:{src:e.userForm.avatar},on:{click:function(t){return e.clickAvatarInput()}}})])]),e._v(" "),a("el-form-item",[a("input",{staticStyle:{display:"none"},attrs:{id:"avatarInput",type:"file",accept:"image/*"},on:{change:function(t){return e.changeAvatar()}}})]),e._v(" "),a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"昵称"},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"新密码",type:"password"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),a("el-form-item",{staticClass:"me-login-button",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.upload()}}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(d,p,!1,function(e){a("YAGB")},"data-v-7be4a3ee",null);t.default=v.exports}});
//# sourceMappingURL=10.a4f2d87152703be5a8cf.js.map